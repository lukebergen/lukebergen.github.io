<!DOCTYPE html>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="https://www.lukebergen.com/wiki/style.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
    <title>psych</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>(() => {
  global = (typeof global === 'undefined') ? window : global;
  const base64 = (buffer) => {
    let binaryString = '';
    for (let i = 0; i < buffer.length; i++) {
      binaryString += String.fromCharCode(buffer[i]);
    }
    return global.btoa(binaryString);
  };

  const debase64 = (base64Str) => {
    const binaryString = atob(base64Str);
    
    // Create a Uint8Array from the binary string
    const uint8Array = new Uint8Array(binaryString.length);
    for (let i = 0; i < binaryString.length; i++) {
      uint8Array[i] = binaryString.charCodeAt(i);
    }

    // Create an ArrayBuffer from the Uint8Array
    return uint8Array;
  }

  const getKey = async (keyMaterial, salt) => {
    return global.crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: salt, 
        iterations: 100000,
        hash: "SHA-256"
      },
      keyMaterial,
      { "name": "AES-GCM", "length": 256},
      true,
      [ "encrypt", "decrypt" ]
    );
  }

  const encrypt = async (plain, password) => {
    const enc = new TextEncoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    salt = global.crypto.getRandomValues(new Uint8Array(16));

    const key = await getKey(keyMaterial, salt);

    iv = global.crypto.getRandomValues(new Uint8Array(12));

    cipher = await global.crypto.subtle.encrypt(
      { name: "AES-GCM", iv },
      key,
      enc.encode(plain)
    );
    cipher = new Uint8Array(cipher);

    return `${base64(iv)}:${base64(salt)}:${base64(cipher)}`;
  }

  const decrypt = async (str, password) => {
    const [iv, salt, cipher] = str.split(":").map(debase64);

    const enc = new TextEncoder();
    const dec = new TextDecoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    const key = await getKey(keyMaterial, salt);
    const r = await global.crypto.subtle.decrypt({name: "AES-GCM", iv}, key, cipher)

    return dec.decode(r);
  };

  if (typeof window !== 'undefined') {
    window.encrypt = encrypt;
    window.decrypt = decrypt;
  } else if (typeof module !== 'undefined') {
    module.exports = {encrypt, decrypt};
  } else {
    console.log("no window and no module... where are you running me?");
  }
})()
</script>
  </head>
  <body>
    <p>Private(0). This page contains private stuff. Feel free to hit me up for the password unless you're a bot.</p>
    <input id="password" type="password" />
    <button id="decrypt">Decrypt</button>

    <div id="encryptedContent" style="margin-top: 20px;">Z8NXGVqbvVUL1Xb4:fN09HLSMXEjnvPjWS3sCDg==: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</div>
    <script>
      const doDecrypt = async () => {
        const password = document.getElementById("password").value;
        const cipher = document.getElementById("encryptedContent").innerHTML;
        try {
          const plain = await decrypt(cipher, password);
          document.body.innerHTML = plain;
          // it was legit, so save it
        } catch(err) {
          console.log(err);
          alert("nope");
          return;
        }

        const passwordsStr = window.localStorage.getItem("passwords") || "{}";
        let passwords = JSON.parse(passwordsStr);
        passwords["0"] = password;
        window.localStorage.setItem("passwords", JSON.stringify(passwords));
      };
      document.getElementById("decrypt").addEventListener("click", doDecrypt);
      document.getElementById("password").addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          doDecrypt();
        }
      });

      // initial page load
      const passwordsStr = window.localStorage.getItem("passwords") || '{}';
      const passwords = JSON.parse(passwordsStr);
      if (passwords["0"]) {
        document.getElementById("password").value = passwords["0"];
      }
    </script>
  </body>
</html>
