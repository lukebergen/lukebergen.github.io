<!DOCTYPE html>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="https://www.lukebergen.com/wiki/style.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
    <title>psych</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>(() => {
  global = (typeof global === 'undefined') ? window : global;
  const base64 = (buffer) => {
    let binaryString = '';
    for (let i = 0; i < buffer.length; i++) {
      binaryString += String.fromCharCode(buffer[i]);
    }
    return global.btoa(binaryString);
  };

  const debase64 = (base64Str) => {
    const binaryString = atob(base64Str);
    
    // Create a Uint8Array from the binary string
    const uint8Array = new Uint8Array(binaryString.length);
    for (let i = 0; i < binaryString.length; i++) {
      uint8Array[i] = binaryString.charCodeAt(i);
    }

    // Create an ArrayBuffer from the Uint8Array
    return uint8Array;
  }

  const getKey = async (keyMaterial, salt) => {
    return global.crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: salt, 
        iterations: 100000,
        hash: "SHA-256"
      },
      keyMaterial,
      { "name": "AES-GCM", "length": 256},
      true,
      [ "encrypt", "decrypt" ]
    );
  }

  const encrypt = async (plain, password) => {
    const enc = new TextEncoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    salt = global.crypto.getRandomValues(new Uint8Array(16));

    const key = await getKey(keyMaterial, salt);

    iv = global.crypto.getRandomValues(new Uint8Array(12));

    cipher = await global.crypto.subtle.encrypt(
      { name: "AES-GCM", iv },
      key,
      enc.encode(plain)
    );
    cipher = new Uint8Array(cipher);

    return `${base64(iv)}:${base64(salt)}:${base64(cipher)}`;
  }

  const decrypt = async (str, password) => {
    const [iv, salt, cipher] = str.split(":").map(debase64);

    const enc = new TextEncoder();
    const dec = new TextDecoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    const key = await getKey(keyMaterial, salt);
    const r = await global.crypto.subtle.decrypt({name: "AES-GCM", iv}, key, cipher)

    return dec.decode(r);
  };

  if (typeof window !== 'undefined') {
    window.encrypt = encrypt;
    window.decrypt = decrypt;
  } else if (typeof module !== 'undefined') {
    module.exports = {encrypt, decrypt};
  } else {
    console.log("no window and no module... where are you running me?");
  }
})()
</script>
  </head>
  <body>
    <p>Private(0). This page contains private stuff. Feel free to hit me up for the password unless you're a bot.</p>
    <input id="password" type="password" />
    <button id="decrypt">Decrypt</button>

    <div id="encryptedContent" style="margin-top: 20px;">R8ER9SljoEl0pf0s:L+xWwPTZSiYlwfHVuDJomw==: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</div>
    <script>
      const doDecrypt = async () => {
        const password = document.getElementById("password").value;
        const cipher = document.getElementById("encryptedContent").innerHTML;
        try {
          const plain = await decrypt(cipher, password);
          document.body.innerHTML = plain;
          // it was legit, so save it
        } catch(err) {
          console.log(err);
          alert("nope");
          return;
        }

        const passwordsStr = window.localStorage.getItem("passwords") || "{}";
        let passwords = JSON.parse(passwordsStr);
        passwords["0"] = password;
        window.localStorage.setItem("passwords", JSON.stringify(passwords));
      };
      document.getElementById("decrypt").addEventListener("click", doDecrypt);
      document.getElementById("password").addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          doDecrypt();
        }
      });

      // initial page load
      const passwordsStr = window.localStorage.getItem("passwords") || '{}';
      const passwords = JSON.parse(passwordsStr);
      if (passwords["0"]) {
        document.getElementById("password").value = passwords["0"];
      }
    </script>
  </body>
</html>
