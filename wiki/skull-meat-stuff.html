<!DOCTYPE html>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="https://www.lukebergen.com/wiki/style.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
    <title>psych</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>(() => {
  global = (typeof global === 'undefined') ? window : global;
  const base64 = (buffer) => {
    let binaryString = '';
    for (let i = 0; i < buffer.length; i++) {
      binaryString += String.fromCharCode(buffer[i]);
    }
    return global.btoa(binaryString);
  };

  const debase64 = (base64Str) => {
    const binaryString = atob(base64Str);
    
    // Create a Uint8Array from the binary string
    const uint8Array = new Uint8Array(binaryString.length);
    for (let i = 0; i < binaryString.length; i++) {
      uint8Array[i] = binaryString.charCodeAt(i);
    }

    // Create an ArrayBuffer from the Uint8Array
    return uint8Array;
  }

  const getKey = async (keyMaterial, salt) => {
    return global.crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: salt, 
        iterations: 100000,
        hash: "SHA-256"
      },
      keyMaterial,
      { "name": "AES-GCM", "length": 256},
      true,
      [ "encrypt", "decrypt" ]
    );
  }

  const encrypt = async (plain, password) => {
    const enc = new TextEncoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    salt = global.crypto.getRandomValues(new Uint8Array(16));

    const key = await getKey(keyMaterial, salt);

    iv = global.crypto.getRandomValues(new Uint8Array(12));

    cipher = await global.crypto.subtle.encrypt(
      { name: "AES-GCM", iv },
      key,
      enc.encode(plain)
    );
    cipher = new Uint8Array(cipher);

    return `${base64(iv)}:${base64(salt)}:${base64(cipher)}`;
  }

  const decrypt = async (str, password) => {
    const [iv, salt, cipher] = str.split(":").map(debase64);

    const enc = new TextEncoder();
    const dec = new TextDecoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    const key = await getKey(keyMaterial, salt);
    const r = await global.crypto.subtle.decrypt({name: "AES-GCM", iv}, key, cipher)

    return dec.decode(r);
  };

  if (typeof window !== 'undefined') {
    window.encrypt = encrypt;
    window.decrypt = decrypt;
  } else if (typeof module !== 'undefined') {
    module.exports = {encrypt, decrypt};
  } else {
    console.log("no window and no module... where are you running me?");
  }
})()
</script>
  </head>
  <body>
    <p>Private(0). This page contains private stuff. Feel free to hit me up for the password unless you're a bot.</p>
    <input id="password" type="password" />
    <button id="decrypt">Decrypt</button>

    <div id="encryptedContent" style="margin-top: 20px;">ZlyveCS4BO4LK+5p:TBxQh0ACkJsWyuOqleFoug==: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</div>
    <script>
      const doDecrypt = async () => {
        const password = document.getElementById("password").value;
        const cipher = document.getElementById("encryptedContent").innerHTML;
        try {
          const plain = await decrypt(cipher, password);
          document.body.innerHTML = plain;
          // it was legit, so save it
        } catch(err) {
          console.log(err);
          alert("nope");
          return;
        }

        const passwordsStr = window.localStorage.getItem("passwords") || "{}";
        let passwords = JSON.parse(passwordsStr);
        passwords["0"] = password;
        window.localStorage.setItem("passwords", JSON.stringify(passwords));
      };
      document.getElementById("decrypt").addEventListener("click", doDecrypt);
      document.getElementById("password").addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          doDecrypt();
        }
      });

      // initial page load
      const passwordsStr = window.localStorage.getItem("passwords") || '{}';
      const passwords = JSON.parse(passwordsStr);
      if (passwords["0"]) {
        document.getElementById("password").value = passwords["0"];
      }
    </script>
  </body>
</html>
