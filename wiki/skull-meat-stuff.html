<!DOCTYPE html>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="https://www.lukebergen.com/wiki/style.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
    <title>psych</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>(() => {
  global = (typeof global === 'undefined') ? window : global;
  const base64 = (buffer) => {
    let binaryString = '';
    for (let i = 0; i < buffer.length; i++) {
      binaryString += String.fromCharCode(buffer[i]);
    }
    return global.btoa(binaryString);
  };

  const debase64 = (base64Str) => {
    const binaryString = atob(base64Str);
    
    // Create a Uint8Array from the binary string
    const uint8Array = new Uint8Array(binaryString.length);
    for (let i = 0; i < binaryString.length; i++) {
      uint8Array[i] = binaryString.charCodeAt(i);
    }

    // Create an ArrayBuffer from the Uint8Array
    return uint8Array;
  }

  const getKey = async (keyMaterial, salt) => {
    return global.crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: salt, 
        iterations: 100000,
        hash: "SHA-256"
      },
      keyMaterial,
      { "name": "AES-GCM", "length": 256},
      true,
      [ "encrypt", "decrypt" ]
    );
  }

  const encrypt = async (plain, password) => {
    const enc = new TextEncoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    salt = global.crypto.getRandomValues(new Uint8Array(16));

    const key = await getKey(keyMaterial, salt);

    iv = global.crypto.getRandomValues(new Uint8Array(12));

    cipher = await global.crypto.subtle.encrypt(
      { name: "AES-GCM", iv },
      key,
      enc.encode(plain)
    );
    cipher = new Uint8Array(cipher);

    return `${base64(iv)}:${base64(salt)}:${base64(cipher)}`;
  }

  const decrypt = async (str, password) => {
    const [iv, salt, cipher] = str.split(":").map(debase64);

    const enc = new TextEncoder();
    const dec = new TextDecoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    const key = await getKey(keyMaterial, salt);
    const r = await global.crypto.subtle.decrypt({name: "AES-GCM", iv}, key, cipher)

    return dec.decode(r);
  };

  if (typeof window !== 'undefined') {
    window.encrypt = encrypt;
    window.decrypt = decrypt;
  } else if (typeof module !== 'undefined') {
    module.exports = {encrypt, decrypt};
  } else {
    console.log("no window and no module... where are you running me?");
  }
})()
</script>
  </head>
  <body>
    <p>Private(0). This page contains private stuff. Feel free to hit me up for the password unless you're a bot.</p>
    <input id="password" type="password" />
    <button id="decrypt">Decrypt</button>

    <div id="encryptedContent" style="margin-top: 20px;">AuGCOwqCNfgTUEjO:bVYilCXpvtkx1v2Jb63+0g==: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</div>
    <script>
      const doDecrypt = async () => {
        const password = document.getElementById("password").value;
        const cipher = document.getElementById("encryptedContent").innerHTML;
        try {
          const plain = await decrypt(cipher, password);
          document.body.innerHTML = plain;
          // it was legit, so save it
        } catch(err) {
          console.log(err);
          alert("nope");
          return;
        }

        const passwordsStr = window.localStorage.getItem("passwords") || "{}";
        let passwords = JSON.parse(passwordsStr);
        passwords["0"] = password;
        window.localStorage.setItem("passwords", JSON.stringify(passwords));
      };
      document.getElementById("decrypt").addEventListener("click", doDecrypt);
      document.getElementById("password").addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          doDecrypt();
        }
      });

      // initial page load
      const passwordsStr = window.localStorage.getItem("passwords") || '{}';
      const passwords = JSON.parse(passwordsStr);
      if (passwords["0"]) {
        document.getElementById("password").value = passwords["0"];
      }
    </script>
  </body>
</html>
