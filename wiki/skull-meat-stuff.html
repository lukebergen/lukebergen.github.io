<!DOCTYPE html>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="https://www.lukebergen.com/wiki/style.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
    <title>psych</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>(() => {
  global = (typeof global === 'undefined') ? window : global;
  const base64 = (buffer) => {
    let binaryString = '';
    for (let i = 0; i < buffer.length; i++) {
      binaryString += String.fromCharCode(buffer[i]);
    }
    return global.btoa(binaryString);
  };

  const debase64 = (base64Str) => {
    const binaryString = atob(base64Str);
    
    // Create a Uint8Array from the binary string
    const uint8Array = new Uint8Array(binaryString.length);
    for (let i = 0; i < binaryString.length; i++) {
      uint8Array[i] = binaryString.charCodeAt(i);
    }

    // Create an ArrayBuffer from the Uint8Array
    return uint8Array;
  }

  const getKey = async (keyMaterial, salt) => {
    return global.crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: salt, 
        iterations: 100000,
        hash: "SHA-256"
      },
      keyMaterial,
      { "name": "AES-GCM", "length": 256},
      true,
      [ "encrypt", "decrypt" ]
    );
  }

  const encrypt = async (plain, password) => {
    const enc = new TextEncoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    salt = global.crypto.getRandomValues(new Uint8Array(16));

    const key = await getKey(keyMaterial, salt);

    iv = global.crypto.getRandomValues(new Uint8Array(12));

    cipher = await global.crypto.subtle.encrypt(
      { name: "AES-GCM", iv },
      key,
      enc.encode(plain)
    );
    cipher = new Uint8Array(cipher);

    return `${base64(iv)}:${base64(salt)}:${base64(cipher)}`;
  }

  const decrypt = async (str, password) => {
    const [iv, salt, cipher] = str.split(":").map(debase64);

    const enc = new TextEncoder();
    const dec = new TextDecoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    const key = await getKey(keyMaterial, salt);
    const r = await global.crypto.subtle.decrypt({name: "AES-GCM", iv}, key, cipher)

    return dec.decode(r);
  };

  if (typeof window !== 'undefined') {
    window.encrypt = encrypt;
    window.decrypt = decrypt;
  } else if (typeof module !== 'undefined') {
    module.exports = {encrypt, decrypt};
  } else {
    console.log("no window and no module... where are you running me?");
  }
})()
</script>
  </head>
  <body>
    <p>Private(0). This page contains private stuff. Feel free to hit me up for the password unless you're a bot.</p>
    <input id="password" type="password" />
    <button id="decrypt">Decrypt</button>

    <div id="encryptedContent" style="margin-top: 20px;">j/agYfcHGv0oqCtB:RCL4MuRAreUeFsheaCMdaQ==:/yLJqcQBj/nme1YBmNRaQVuKLUVYwMV/t/RUtsQBnnOB8Fz/LA3QKp4L3RB/+dusrIDn+LRfgb+KiHm55aBKN3uX0ikpm9NxBPwArK379cTjX90vSjJAqnlK5acqpUWBcgN6+Kj1NvLrtvbmIUtRHM0057epAjp7ONTYvJC6MkCbSg+t0MBMPKleq8ljHlDLdyCJjf0f4bIKwvSKKCeqmxI7CxTG4LD4DW19ZV2EUgjf95C3vD8EJBqznTdEVDKXw3WxLXFZQDZhAPg7zWkXPo0exAiFfWW7WBNZxTAHcONdFFhzUvWdKpjefv2ru4NW2kAbzCZN55LhequvyEOB/zvt4dFrJ3/NoT5IcDpzaEBshtqLgSF6Gkebf2Amg6Fv4ReTg5xpUko4Hp6wK5J2wvTAerDCfNAAhrLBjrCgTAHzeW8WWm/pckSxe8o8f1oTDPte9k7Nk7xtumcEilLkOLLyrOOUtp71c3iOm/UG2dRNun6F2ht/HAvw9eZbcuuPxz3QhMSpC+Q+slmVLBGI5VYmjxeZS5J5mpXD+R2ESsECsHSgmMp3oNNrQ/Nn3OSJ9PEYJq3ZH44ctNuX1NGrgpILZYvWOyPCPWoVaEMNcud6NePEP5EAQ+IUtP31DGdR88BrZOoR+C2yvD0GNXhe6I9B0bUXE7kUn+xByngn9Yb6gVWITSIkIVMTMwNELIyKp0JHUnRFD3n6O9ePdfuKxCgBm7YhrVnm7tWDR+Rbgz1cMjnquj4zXpQVrsEkipYKX0kBwFTleekAXLNbJzo3FmN+oGccLbEF7BfZAi5XAr9vFUUtcEOzHtqQbLbmm3Ddm9rYN3WaRTO81buzmoYFjq2pM6/0zxHIXQWYfAqxe7srGTU0jBcg20pD4MJglMMrhyEPq2PmZr7V3Z9tI3mk9+5E28jVpsEo1HQu4N1a1EG5JB5tezxHVQljmTyEMKtTSZ0bAF8GoIeZCdjxZuBGEf8uVvWBd1Cg/reltSf1s/yUWC+4RmLz1d6Kbf4XtG+2Cjx5Ao0Ny9RtjhqiC4Jx1gacthdPvzqz4e3SSG2DFOyaJuXeIYaV9CIEzxosc8OY9pK2sSTZprhJIDFo+mZGv0tN2XTmpm/FMXxcKHa575wz5k71JFEy/q7qXVcbrqgQXISJFQVg4jRpadh8sQezxTl/GMlIPEPjtBqweOpK050xZ+Z+WgCmrc84u//VqVBaGv8qfa/dV15jyuEHhllD4Hac8gUZwK8+1hB5EZ+UZjgo6ZTm5foEZVPW18EsgfBE9Cmm5NPBquN4P82jzURPhtCw6aLqLnzsDZEtuOYEtlk/MuWYDX0K1a08ygN3EjYcQYg6hJS85d4P6QlyQIshUNgSbiQGgIUodzz4AiOIVBqNhb9PXebSi57zTOxZJjA/nVpJ0xwlum3RiubcDwGhaxhT8bcyEz2EOIZG+9vXJsoqM1LrNY7EKjLIKiCae7HxP0DoMSDuLT1fmyvhzi2Q27gAbd3V56eH2OQgtPgQmgYeIYfTE64u32EHot7HQKrT0JOcchxSzDrIk7+S3woMbLFygHZJ+I/9QQ2g95LUVadCHdG0oLVFY6ylvOby7J8c38DEwFjp+BMQ12DrWgrMbfXK1lbLzHvsKR7WQ9KL210BgEJhWxk4piAuXBnklrkRS6//W1JsDnHy/CsCRZLrVT55OD2l3ogBMB1+89k9jYSdukMRbmMEvQm1CeJa2xunrnq2KRnzaZyB7hBmTNtbIiBDDyQosWV+XucAoTz9H2GOe+oCb+xh/68auz/5l1BKd5NThHD/KE/e/QKvHinBI5yK/jjqDhWc4uJfpABRAtWxbfz4v3ADvZTsipmPUJBae6TnpL19jk17NuomFkjzLH4soPOE75MLhCa0nJakUHedSl5g50Tw1QJX0dfyMTMgRA85fW4ZCR3QbPPhtfYkvJ41GqCbIFeqLzw+NxAfymC0qVBXm0gHXF7WS28bnpkIOhnIwlca5FqshAPv8VxYfFutd8+zxA7R3zkN28hv/1SkIR9Q6Jmmxrt6wjZZKQILrgMxCMHRNgALjmlBGPSRFdE9I7dBtdGIEkZYhfhAAx275CNvWP4EKTRoFEQ4WbGVTrmFp1bGYIFDUobX+nOTfkYFBaZlQcKupnx/6arWlQkvZyoHYDcTRlmFKUg9rREQuyW0/TBc2CkM0Q18CPIFaSuN95b1AjnuaPc/5NrbXVGmxwdL6+36f6WAH/MrlcVH5+WcuUpQvNVK+VR1ZeQAhDi0fHMjk/4jrqbD5nCNK1sjKXtM0kz7Gg7S8zOYle0wAqCmMm+eYGDeXR6ZmNzhxqjmHGmOTPUYwzWDbE3plubfM/ZH9IsRLyOCLq83NWGQoJhOEGA2VCaAmRb8zlViEWyYQ0XSnfq/e136YKVfNOo4QMY+5tDG3OoUNhT7DV/7qsKTySIH+zxV+JW5etS8fABMM9R3cLyDEDoPoh8o8QxlIB8vI5Fj3yDMciROiP96eI0EvaW50iRMBkObNIUhW4Mn/xVlD5hjIqdThQlfORC7B2vPeY5G1QrXGwRHJzScQoP2rMyBMCrHK5QbiQdLAJvJtf1ogWzEnDWQM7EE/UjWvGIERjPycjOOFfPOQ9TBPxO3se0dHfQEh/gt5lY67MvkP/RqK0wJckN0s+0J7Dq3zMeketDZWGqy5sJo+fCWav3OxtcCqiBFOak9tqNnqbnAqRJq5Q0I9LTwA3kBbS9D2B8U5hoT7Ou3aSWoSYejn/54so4K6Jt83+wqc61WcK7D0HwKtR1h4mT/Hk3gBfkVCO9ztDCMauSrTCcGYCMqgjqL7C4EwnB62b8yCogx2HTHxKINPiRrlYUMrr+yfmgArRwAJ1jcvzQAwQ46NDK1PvWG47aMDJRYiwhuhttqjKRvFZLX0ResT1NnJ036iDK5cuPp68HBqyK2WXkUoMlALYzJf+btsUqb8IK2/9gB9ZRw8hS8h8uCTrznu15LX1K8MJ5oGBORwMhxt3AMoZ+MdgI/GesYXBfcNqHSA3Uj14Ty+tY/BLU/AYT6PEod/iCa7gCAPAfx5648qfomQAJ2E55cz4VTr3/kE7nss9eY3o/u6aIQud/zithV+FgKu7dDbG/xdJ4Qd1hs4IB1iuKknA4LuTRVNXuEATEtarHpHqeyhME28h1fQ7EbNWR/Sb6TAeo23dfEMEgpEBGkSlzmCHbo8t9aaUwBwo15rxUWNXbLSD3hjMGEe+W2ImUd+V/OYB0gONk8n21wPl21Cy3A63jgB86WyH/baFTGTAD3Duwitlz7cGJ5dCkBN4/VeBSW6RAGLfWYjAKXHZk2n5H2TRxmpCYONOyP8YZSAxPlN7aQj5DBW+3n0sFd0tEeSiXb4fBK8wsrPlPAO/McJl1ksNFO5IHSJM9Nxo/M+Etx9yPSta2WyNHmrx7U8exwm8FgOAvOcMrRD0b/DC6djC0lQyYtiEyCSBRIOn1szwa5WsP84+mnuYk1yNqI2VLL83yc2eEWAmFJEQpcgRwVKp+TzSDK0aNj9qFyyV/9D2OXD/AS111oew0qRZt5Hyk8RliItQKZcEinChv278VP0hhZonaicaHKdp0HWNNFRLxFen15QNKV50qSdX9KKO58d0IX67As0MuTPH4fXQDxqAcautIkoWyiGqVFZTxE+AhstbZhwVl4TkIrStHLmxPOL4Y4N+4Jls83LAlu4c915c2855mphIkLlmEdzCO/ie/44da8ypPfIN/UqpylrEZTOSn1/vCU22785Ic11ii1Vexo0/Wtu/cv7PG3ItZ1vMM/eAN8GIWNANf4uSkOk7XT2YJoX4qxewFQVOawZvCACFQOSCRIpH6mE1R1mm5bnWvSoNOrNdS/neMmOGVGi8FR/OeGP/BzkcAyycHSwlzXeNlVOAHx/Stf+N5X/7ZP+z/fw+d4tWsFdNK3Brg/EH3Sn83yDe33bHd+kvUDZisNka4+7MMBiHOfieCnbmU196sEfWlvLRMbqIWJieUojVVenUJ/O17ONUdPXQiXKIaC9p4d/Kct7ASBSycg53lj/X0nYzSix3RszbF2V9Nkkf70+u5KnhZYVL1aApVjU/K5OV1v9kP9IVGXbrKjZa21Cbd8xDkzFippOi/51YD/3CJp6Rx/GzjqJpR7hdRWLkeK9D8UIfuFgZ44ynCZJYnSs9WoumdFVBe+iBvE62LbuuNLbdyMhbseC/mSDcCufjD5hXFNMT9p0k29Z9cytWvI3rdJt530k11dyPyonr9lfPNm5d+XXeIAdjs4/6PZPjWhEEaLpfi/1ElRrfngMbzizES/PazW/XG+zCU7DNpasXk6As5tqMS8mItB5idnsDPfcY+eGYJ/mgypYVKZn9Ry8I8Mwy+3H3F/BMsAS/BluJ/ggR+0ylPesUeTljpD/lO028QorSfXd1yZWr3waMADECzTHetwoLLxKTeMUgTmz0Md5OD6Rq/ZbF54d2BNaK7/71dAHuY2hEozS4M1Y9JiUgByuBvXEaKvz68bn4Xrwq/RXHFnsdX4VmtICoojzyunLttzWNTJKU6CJrABUBgmwNDOXErRQHYGSNYhSpniK1bS4vDzbZVm8b6ENe8oqNqR5dnlGJPGKmgb+Y1zPqCgCJdvvH48YWwxee4iWtoWLMkiOxp3ADVwuXmVM3YEPX7iLMCnK87ONNMXdqDH7ciHhslYS6HrAqAM9Rf+B0wQG9Ii07D6BkSLTGNZYfDVTzJyAr19CuFkUv9N69NSc78aGdPSuHu3IMpEm4EijZ4iQsyCgZL8PuTmrs8AHyDL7dnmhppVxcs1M8qrJ5nXT5oB0KLLOLBj1/PuEJPeWhKIAHy3Z/N6dXMosCDbYWWTY0ILzkg71P8teKWl63YcgTepAOAparouwYf3qvWjKVjHAfSyIfft0KNAEQe4IMUtrBdw335NLpzpXghSzCuWFfCk7tfuHCCOFR2rYKjBHAIftRBerT5SQyvgkwmFqj+ogdiyCQcUMz0o8M4NCOuwUHRqU2f99lS4oPRJ2bwV1a9CFTC/Pmhtlbj59RHLyI5NV2exKJDOPZAliqrhPxe+GY1uxomhlheDv1RbCIBSjqP5uhfg4weSN3ppR7KZEGNRoCEeg3o5g1O43Nsl6WuhfSW/c31VDi9z0vbJDd6KGtLVbOF4Bl9Kk4NmrL9mWorUl3i9Jw5vEFVZ8zrZ3oDYof8g5dYpaGePaVGx9hr5B6XvTGXNOB4KCgDqX8iJv9y8D/Lbghzja+IQlj6ZZJQHclWGy3aeTcKiiNt8m4/iUcScz1dvFxjX37vMBU9rE/JTkns7hZPmEWlchdLOs68XD1se9zQxH3pAou4+5MzoE07kT9m3Bt2aiTpeuVoG4YbB6wT6UVZGQxbS7dWlHNzdUOE7YDayu7jZHOUleF1VbXvJFYRGQbJ813Iq5PDsnKPhAlEHi4wYVddpiX1dk1rIHRnSPg9ffhOpwE1rKSy6NFr/3228WumSWqoWGkpxcgOXdI16oK9Ir4tpb0sGixNCrsSmbvte/OUbG+/KixqRRC0ipswkSrN3pP+Hs+nTwOF4tHVdf73QRCJy6y+4045aGkn8egCsg2TsPZNzYOs2Id1V7XgDPG6TJ7eWjPUAlSzdeXeMhgVAy04Nz0TCPYtOILuZoWRsQ0iELFqkrRSe0ybC8hoMk6P+KicjCz3kpFGSO5RE6/g0TjGPJbARXIHyIWUHl3XxMnOvebZU5qLI4q99ZA3XRpsR7kfwFhQ5IoCXTLU+</div>
    <script>
      const doDecrypt = async () => {
        const password = document.getElementById("password").value;
        const cipher = document.getElementById("encryptedContent").innerHTML;
        try {
          const plain = await decrypt(cipher, password);
          document.body.innerHTML = plain;
          // it was legit, so save it
        } catch(err) {
          console.log(err);
          alert("nope");
          return;
        }

        const passwordsStr = window.localStorage.getItem("passwords") || "{}";
        let passwords = JSON.parse(passwordsStr);
        passwords["0"] = password;
        window.localStorage.setItem("passwords", JSON.stringify(passwords));
      };
      document.getElementById("decrypt").addEventListener("click", doDecrypt);
      document.getElementById("password").addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          doDecrypt();
        }
      });

      // initial page load
      const passwordsStr = window.localStorage.getItem("passwords") || '{}';
      const passwords = JSON.parse(passwordsStr);
      if (passwords["0"]) {
        document.getElementById("password").value = passwords["0"];
      }
    </script>
  </body>
</html>
