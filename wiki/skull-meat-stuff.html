<!DOCTYPE html>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="https://www.lukebergen.com/wiki/style.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
    <title>psych</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>(() => {
  global = (typeof global === 'undefined') ? window : global;
  const base64 = (buffer) => {
    let binaryString = '';
    for (let i = 0; i < buffer.length; i++) {
      binaryString += String.fromCharCode(buffer[i]);
    }
    return global.btoa(binaryString);
  };

  const debase64 = (base64Str) => {
    const binaryString = atob(base64Str);
    
    // Create a Uint8Array from the binary string
    const uint8Array = new Uint8Array(binaryString.length);
    for (let i = 0; i < binaryString.length; i++) {
      uint8Array[i] = binaryString.charCodeAt(i);
    }

    // Create an ArrayBuffer from the Uint8Array
    return uint8Array;
  }

  const getKey = async (keyMaterial, salt) => {
    return global.crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: salt, 
        iterations: 100000,
        hash: "SHA-256"
      },
      keyMaterial,
      { "name": "AES-GCM", "length": 256},
      true,
      [ "encrypt", "decrypt" ]
    );
  }

  const encrypt = async (plain, password) => {
    const enc = new TextEncoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    salt = global.crypto.getRandomValues(new Uint8Array(16));

    const key = await getKey(keyMaterial, salt);

    iv = global.crypto.getRandomValues(new Uint8Array(12));

    cipher = await global.crypto.subtle.encrypt(
      { name: "AES-GCM", iv },
      key,
      enc.encode(plain)
    );
    cipher = new Uint8Array(cipher);

    return `${base64(iv)}:${base64(salt)}:${base64(cipher)}`;
  }

  const decrypt = async (str, password) => {
    const [iv, salt, cipher] = str.split(":").map(debase64);

    const enc = new TextEncoder();
    const dec = new TextDecoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    const key = await getKey(keyMaterial, salt);
    const r = await global.crypto.subtle.decrypt({name: "AES-GCM", iv}, key, cipher)

    return dec.decode(r);
  };

  if (typeof window !== 'undefined') {
    window.encrypt = encrypt;
    window.decrypt = decrypt;
  } else if (typeof module !== 'undefined') {
    module.exports = {encrypt, decrypt};
  } else {
    console.log("no window and no module... where are you running me?");
  }
})()
</script>
  </head>
  <body>
    <p>Private(0). This page contains private stuff. Feel free to hit me up for the password unless you're a bot.</p>
    <input id="password" type="password" />
    <button id="decrypt">Decrypt</button>

    <div id="encryptedContent" style="margin-top: 20px;">5B+oRVmB5f+MV9n4:bZ88NzfpxrYFqHUYRydtjw==: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</div>
    <script>
      const doDecrypt = async () => {
        const password = document.getElementById("password").value;
        const cipher = document.getElementById("encryptedContent").innerHTML;
        try {
          const plain = await decrypt(cipher, password);
          document.body.innerHTML = plain;
          // it was legit, so save it
        } catch(err) {
          console.log(err);
          alert("nope");
          return;
        }

        const passwordsStr = window.localStorage.getItem("passwords") || "{}";
        let passwords = JSON.parse(passwordsStr);
        passwords["0"] = password;
        window.localStorage.setItem("passwords", JSON.stringify(passwords));
      };
      document.getElementById("decrypt").addEventListener("click", doDecrypt);
      document.getElementById("password").addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          doDecrypt();
        }
      });

      // initial page load
      const passwordsStr = window.localStorage.getItem("passwords") || '{}';
      const passwords = JSON.parse(passwordsStr);
      if (passwords["0"]) {
        document.getElementById("password").value = passwords["0"];
      }
    </script>
  </body>
</html>
