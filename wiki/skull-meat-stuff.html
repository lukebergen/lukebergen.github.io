<!DOCTYPE html>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="https://www.lukebergen.com/wiki/style.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
    <title>psych</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>(() => {
  global = (typeof global === 'undefined') ? window : global;
  const base64 = (buffer) => {
    let binaryString = '';
    for (let i = 0; i < buffer.length; i++) {
      binaryString += String.fromCharCode(buffer[i]);
    }
    return global.btoa(binaryString);
  };

  const debase64 = (base64Str) => {
    const binaryString = atob(base64Str);
    
    // Create a Uint8Array from the binary string
    const uint8Array = new Uint8Array(binaryString.length);
    for (let i = 0; i < binaryString.length; i++) {
      uint8Array[i] = binaryString.charCodeAt(i);
    }

    // Create an ArrayBuffer from the Uint8Array
    return uint8Array;
  }

  const getKey = async (keyMaterial, salt) => {
    return global.crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: salt, 
        iterations: 100000,
        hash: "SHA-256"
      },
      keyMaterial,
      { "name": "AES-GCM", "length": 256},
      true,
      [ "encrypt", "decrypt" ]
    );
  }

  const encrypt = async (plain, password) => {
    const enc = new TextEncoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    salt = global.crypto.getRandomValues(new Uint8Array(16));

    const key = await getKey(keyMaterial, salt);

    iv = global.crypto.getRandomValues(new Uint8Array(12));

    cipher = await global.crypto.subtle.encrypt(
      { name: "AES-GCM", iv },
      key,
      enc.encode(plain)
    );
    cipher = new Uint8Array(cipher);

    return `${base64(iv)}:${base64(salt)}:${base64(cipher)}`;
  }

  const decrypt = async (str, password) => {
    const [iv, salt, cipher] = str.split(":").map(debase64);

    const enc = new TextEncoder();
    const dec = new TextDecoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    const key = await getKey(keyMaterial, salt);
    const r = await global.crypto.subtle.decrypt({name: "AES-GCM", iv}, key, cipher)

    return dec.decode(r);
  };

  if (typeof window !== 'undefined') {
    window.encrypt = encrypt;
    window.decrypt = decrypt;
  } else if (typeof module !== 'undefined') {
    module.exports = {encrypt, decrypt};
  } else {
    console.log("no window and no module... where are you running me?");
  }
})()
</script>
  </head>
  <body>
    <p>Private(0). This page contains private stuff. Feel free to hit me up for the password unless you're a bot.</p>
    <input id="password" type="password" />
    <button id="decrypt">Decrypt</button>

    <div id="encryptedContent" style="margin-top: 20px;">Lyi/wnHpdB0vxwCw:gBwzQ9RpO1c2Zx3H/AAISg==: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</div>
    <script>
      const doDecrypt = async () => {
        const password = document.getElementById("password").value;
        const cipher = document.getElementById("encryptedContent").innerHTML;
        try {
          const plain = await decrypt(cipher, password);
          document.body.innerHTML = plain;
          // it was legit, so save it
        } catch(err) {
          console.log(err);
          alert("nope");
          return;
        }

        const passwordsStr = window.localStorage.getItem("passwords") || "{}";
        let passwords = JSON.parse(passwordsStr);
        passwords["0"] = password;
        window.localStorage.setItem("passwords", JSON.stringify(passwords));
      };
      document.getElementById("decrypt").addEventListener("click", doDecrypt);
      document.getElementById("password").addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          doDecrypt();
        }
      });

      // initial page load
      const passwordsStr = window.localStorage.getItem("passwords") || '{}';
      const passwords = JSON.parse(passwordsStr);
      if (passwords["0"]) {
        document.getElementById("password").value = passwords["0"];
      }
    </script>
  </body>
</html>
