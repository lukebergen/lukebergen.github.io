<!DOCTYPE html>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="https://www.lukebergen.com/wiki/style.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
    <title>psych</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>(() => {
  global = (typeof global === 'undefined') ? window : global;
  const base64 = (buffer) => {
    let binaryString = '';
    for (let i = 0; i < buffer.length; i++) {
      binaryString += String.fromCharCode(buffer[i]);
    }
    return global.btoa(binaryString);
  };

  const debase64 = (base64Str) => {
    const binaryString = atob(base64Str);
    
    // Create a Uint8Array from the binary string
    const uint8Array = new Uint8Array(binaryString.length);
    for (let i = 0; i < binaryString.length; i++) {
      uint8Array[i] = binaryString.charCodeAt(i);
    }

    // Create an ArrayBuffer from the Uint8Array
    return uint8Array;
  }

  const getKey = async (keyMaterial, salt) => {
    return global.crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: salt, 
        iterations: 100000,
        hash: "SHA-256"
      },
      keyMaterial,
      { "name": "AES-GCM", "length": 256},
      true,
      [ "encrypt", "decrypt" ]
    );
  }

  const encrypt = async (plain, password) => {
    const enc = new TextEncoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    salt = global.crypto.getRandomValues(new Uint8Array(16));

    const key = await getKey(keyMaterial, salt);

    iv = global.crypto.getRandomValues(new Uint8Array(12));

    cipher = await global.crypto.subtle.encrypt(
      { name: "AES-GCM", iv },
      key,
      enc.encode(plain)
    );
    cipher = new Uint8Array(cipher);

    return `${base64(iv)}:${base64(salt)}:${base64(cipher)}`;
  }

  const decrypt = async (str, password) => {
    const [iv, salt, cipher] = str.split(":").map(debase64);

    const enc = new TextEncoder();
    const dec = new TextDecoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    const key = await getKey(keyMaterial, salt);
    const r = await global.crypto.subtle.decrypt({name: "AES-GCM", iv}, key, cipher)

    return dec.decode(r);
  };

  if (typeof window !== 'undefined') {
    window.encrypt = encrypt;
    window.decrypt = decrypt;
  } else if (typeof module !== 'undefined') {
    module.exports = {encrypt, decrypt};
  } else {
    console.log("no window and no module... where are you running me?");
  }
})()
</script>
  </head>
  <body>
    <p>Private(0). This page contains private stuff. Feel free to hit me up for the password unless you're a bot.</p>
    <input id="password" type="password" />
    <button id="decrypt">Decrypt</button>

    <div id="encryptedContent" style="margin-top: 20px;">NAICugEJM+hHXzp/:oIpG+hQzl7c/B2OFCBgvyg==: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</div>
    <script>
      const doDecrypt = async () => {
        const password = document.getElementById("password").value;
        const cipher = document.getElementById("encryptedContent").innerHTML;
        try {
          const plain = await decrypt(cipher, password);
          document.body.innerHTML = plain;
          // it was legit, so save it
        } catch(err) {
          console.log(err);
          alert("nope");
          return;
        }

        const passwordsStr = window.localStorage.getItem("passwords") || "{}";
        let passwords = JSON.parse(passwordsStr);
        passwords["0"] = password;
        window.localStorage.setItem("passwords", JSON.stringify(passwords));
      };
      document.getElementById("decrypt").addEventListener("click", doDecrypt);
      document.getElementById("password").addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          doDecrypt();
        }
      });

      // initial page load
      const passwordsStr = window.localStorage.getItem("passwords") || '{}';
      const passwords = JSON.parse(passwordsStr);
      if (passwords["0"]) {
        document.getElementById("password").value = passwords["0"];
      }
    </script>
  </body>
</html>
