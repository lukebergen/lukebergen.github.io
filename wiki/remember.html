<!DOCTYPE html>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="https://www.lukebergen.com/wiki/style.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
    <title>psych</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>(() => {
  global = (typeof global === 'undefined') ? window : global;
  const base64 = (buffer) => {
    let binaryString = '';
    for (let i = 0; i < buffer.length; i++) {
      binaryString += String.fromCharCode(buffer[i]);
    }
    return global.btoa(binaryString);
  };

  const debase64 = (base64Str) => {
    const binaryString = atob(base64Str);
    
    // Create a Uint8Array from the binary string
    const uint8Array = new Uint8Array(binaryString.length);
    for (let i = 0; i < binaryString.length; i++) {
      uint8Array[i] = binaryString.charCodeAt(i);
    }

    // Create an ArrayBuffer from the Uint8Array
    return uint8Array;
  }

  const getKey = async (keyMaterial, salt) => {
    return global.crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: salt, 
        iterations: 100000,
        hash: "SHA-256"
      },
      keyMaterial,
      { "name": "AES-GCM", "length": 256},
      true,
      [ "encrypt", "decrypt" ]
    );
  }

  const encrypt = async (plain, password) => {
    const enc = new TextEncoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    salt = global.crypto.getRandomValues(new Uint8Array(16));

    const key = await getKey(keyMaterial, salt);

    iv = global.crypto.getRandomValues(new Uint8Array(12));

    cipher = await global.crypto.subtle.encrypt(
      { name: "AES-GCM", iv },
      key,
      enc.encode(plain)
    );
    cipher = new Uint8Array(cipher);

    return `${base64(iv)}:${base64(salt)}:${base64(cipher)}`;
  }

  const decrypt = async (str, password) => {
    const [iv, salt, cipher] = str.split(":").map(debase64);

    const enc = new TextEncoder();
    const dec = new TextDecoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    const key = await getKey(keyMaterial, salt);
    const r = await global.crypto.subtle.decrypt({name: "AES-GCM", iv}, key, cipher)

    return dec.decode(r);
  };

  if (typeof window !== 'undefined') {
    window.encrypt = encrypt;
    window.decrypt = decrypt;
  } else if (typeof module !== 'undefined') {
    module.exports = {encrypt, decrypt};
  } else {
    console.log("no window and no module... where are you running me?");
  }
})()
</script>
  </head>
  <body>
    <p>Private(2). This page contains private stuff. Feel free to hit me up for the password unless you're a bot.</p>
    <input id="password" type="password" />
    <button id="decrypt">Decrypt</button>

    <div id="encryptedContent" style="margin-top: 20px;">Sx+y6wlGBo1echsS:ZtP5cUu+fq7E5T0oPFoHKg==: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</div>
    <script>
      const doDecrypt = async () => {
        const password = document.getElementById("password").value;
        const cipher = document.getElementById("encryptedContent").innerHTML;
        try {
          const plain = await decrypt(cipher, password);
          document.body.innerHTML = plain;
          // it was legit, so save it
          passwordsStr = window.localStorage.getItem("passwords") || "{}";
          passwords = JSON.parse(passwordsStr);
          passwords["2"] = password;
        } catch(err) {
          console.log(err);
          alert("nope");
        }
      };
      document.getElementById("decrypt").addEventListener("click", doDecrypt);
      document.getElementById("password").addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          doDecrypt();
        }
      });

      // initial page load
      const passwordsStr = window.localStorage.getItem("passwords") || '{}';
      const passwords = JSON.parse(passwordsStr);
      if (passwords["2"]) {
        document.getElementById("password").value = passwords["2"];
      }
    </script>
  </body>
</html>
