<!DOCTYPE html>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="https://www.lukebergen.com/wiki/style.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
    <title>psych</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>(() => {
  global = (typeof global === 'undefined') ? window : global;
  const base64 = (buffer) => {
    let binaryString = '';
    for (let i = 0; i < buffer.length; i++) {
      binaryString += String.fromCharCode(buffer[i]);
    }
    return global.btoa(binaryString);
  };

  const debase64 = (base64Str) => {
    const binaryString = atob(base64Str);
    
    // Create a Uint8Array from the binary string
    const uint8Array = new Uint8Array(binaryString.length);
    for (let i = 0; i < binaryString.length; i++) {
      uint8Array[i] = binaryString.charCodeAt(i);
    }

    // Create an ArrayBuffer from the Uint8Array
    return uint8Array;
  }

  const getKey = async (keyMaterial, salt) => {
    return global.crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: salt, 
        iterations: 100000,
        hash: "SHA-256"
      },
      keyMaterial,
      { "name": "AES-GCM", "length": 256},
      true,
      [ "encrypt", "decrypt" ]
    );
  }

  const encrypt = async (plain, password) => {
    const enc = new TextEncoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    salt = global.crypto.getRandomValues(new Uint8Array(16));

    const key = await getKey(keyMaterial, salt);

    iv = global.crypto.getRandomValues(new Uint8Array(12));

    cipher = await global.crypto.subtle.encrypt(
      { name: "AES-GCM", iv },
      key,
      enc.encode(plain)
    );
    cipher = new Uint8Array(cipher);

    return `${base64(iv)}:${base64(salt)}:${base64(cipher)}`;
  }

  const decrypt = async (str, password) => {
    const [iv, salt, cipher] = str.split(":").map(debase64);

    const enc = new TextEncoder();
    const dec = new TextDecoder();
    const keyMaterial = await global.crypto.subtle.importKey(
      "raw", 
      enc.encode(password), 
      {name: "PBKDF2"}, 
      false, 
      ["deriveBits", "deriveKey"]
    );

    const key = await getKey(keyMaterial, salt);
    const r = await global.crypto.subtle.decrypt({name: "AES-GCM", iv}, key, cipher)

    return dec.decode(r);
  };

  if (typeof window !== 'undefined') {
    window.encrypt = encrypt;
    window.decrypt = decrypt;
  } else if (typeof module !== 'undefined') {
    module.exports = {encrypt, decrypt};
  } else {
    console.log("no window and no module... where are you running me?");
  }
})()
</script>
  </head>
  <body>
    <p>Private(1). This page contains private stuff. Feel free to hit me up for the password unless you're a bot.</p>
    <input id="password" type="password" />
    <button id="decrypt">Decrypt</button>

    <div id="encryptedContent" style="margin-top: 20px;">0SGPycN9fyukSw8q:xfaL1m0OjUL1OMlE4jqxbg==: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</div>
    <script>
      const doDecrypt = async () => {
        const password = document.getElementById("password").value;
        const cipher = document.getElementById("encryptedContent").innerHTML;
        try {
          const plain = await decrypt(cipher, password);
          document.body.innerHTML = plain;
          // it was legit, so save it
        } catch(err) {
          console.log(err);
          alert("nope");
          return;
        }

        const passwordsStr = window.localStorage.getItem("passwords") || "{}";
        let passwords = JSON.parse(passwordsStr);
        passwords["1"] = password;
        window.localStorage.setItem("passwords", JSON.stringify(passwords));
      };
      document.getElementById("decrypt").addEventListener("click", doDecrypt);
      document.getElementById("password").addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          doDecrypt();
        }
      });

      // initial page load
      const passwordsStr = window.localStorage.getItem("passwords") || '{}';
      const passwords = JSON.parse(passwordsStr);
      if (passwords["1"]) {
        document.getElementById("password").value = passwords["1"];
      }
    </script>
  </body>
</html>
